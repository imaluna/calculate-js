!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((r="undefined"!=typeof globalThis?globalThis:r||self).calculate={})}(this,(function(r){"use strict";var n,t=function(){return t=Object.assign||function(r){for(var n,t=1,e=arguments.length;e>t;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i]);return r},t.apply(this,arguments)};function e(r){return Object.prototype.toString.call(r).slice(8,-1).toLocaleLowerCase()}function i(r){e(r)!==n.OBJECT&&o("params must be object")}function a(r,n){return i(r),i(n),Object.keys(n).every((function(t){var i=n[t],a=e(r[t])===i;return a||o("".concat(t," must be ").concat(i)),a}))}function o(r){throw Error(r)}"function"==typeof SuppressedError&&SuppressedError,function(r){r.NUMBER="number",r.STRING="string",r.BOOLEAN="boolean",r.OBJECT="object",r.UNDEFINED="undefined",r.NULL="null",r.SYMBOL="symbol",r.ARRAY="array",r.DATE="date",r.FUNCTION="function"}(n||(n={}));var u=Math.pow,c=Math.abs,f=function(r,n){return+r.toFixed(n)};function d(r){return r>0?"+":0>r?"-":""}var p=4,N={isEnd:!0,decimal:p},l={isEnd:n.BOOLEAN,decimal:n.NUMBER};function s(r){if(i(r),!a(r=t(t({},N),r),t({n:n.NUMBER,pv:n.NUMBER,pmt:n.NUMBER,rate:n.NUMBER},l)))return NaN;for(var e=r.n,o=r.pmt,c=r.isEnd,f=r.decimal,d=1+r.rate/100,p=-r.pv*u(d,e),s=1;e>=s;)p-=o*u(d,c?e-s:e-s+1),s++;return+p.toFixed(f)}function v(r){if(i(r),!a(r=t(t({},N),r),t({n:n.NUMBER,pv:n.NUMBER,fv:n.NUMBER,rate:n.NUMBER},l)))return NaN;for(var e=r.n,o=r.pv,c=r.fv,f=r.isEnd,d=r.decimal,p=1+r.rate/100,s=0,v=1;e>=v;)s+=u(p,f?e-v:e-v+1),v++;return-((o*u(p,e)+c)/s).toFixed(d)}function E(r){r=t({decimal:p},r);var n=r.rate,e=r.decimal,i=r.initCf;return r.cfList.forEach((function(r,t){i+=r*u(1+n/100,-(t+1))})),f(i,e)}var m={isEqualPayment:!0,periodPerYear:1,decimal:p},M={decimal:n.NUMBER};function B(r){if(i(r),!a(r=t(t({},m),r),t({principal:n.NUMBER,rate:n.NUMBER,periods:n.NUMBER,isEqualPayment:n.BOOLEAN},M)))return NaN;var e=r.decimal;if(r.isEqualPayment){var o=v({n:r.periods,fv:0,pv:r.principal,rate:r.rate,decimal:e});return c(o)}return f(U(r)+R(r),e)}function R(r){if(i(r),!a(r=t(t({},m),r),t({principal:n.NUMBER,rate:n.NUMBER,periods:n.NUMBER,currentPeriod:n.NUMBER,isEqualPayment:n.BOOLEAN},M)))return NaN;var e=r.periods,o=r.decimal;return f(r.isEqualPayment?B(r)-U(r):r.principal/e,o)}function U(r){if(i(r),!a(r=t(t({},m),r),t({principal:n.NUMBER,rate:n.NUMBER,periods:n.NUMBER,currentPeriod:n.NUMBER,isEqualPayment:n.BOOLEAN},M)))return NaN;var e=r.decimal,o=r.currentPeriod,c=r.rate/100;if(r.isEqualPayment){var d=u(1+c,r.periods);return f(r.principal*c*(d-u(1+c,o-1))/(d-1),e)}return f((r.principal-(o-1)*R(r))*c,e)}var h={"0.0":{"0.00":.5,.01:.50399,.02:.50798,.03:.51197,.04:.51595,.05:.51994,.06:.52392,.07:.5279,.08:.53188,.09:.53586},.1:{"0.00":.53983,.01:.5438,.02:.54776,.03:.55172,.04:.55567,.05:.55962,.06:.5636,.07:.56749,.08:.57142,.09:.57535},.2:{"0.00":.57926,.01:.58317,.02:.58706,.03:.59095,.04:.59483,.05:.59871,.06:.60257,.07:.60642,.08:.61026,.09:.61409},.3:{"0.00":.61791,.01:.62172,.02:.62552,.03:.6293,.04:.63307,.05:.63683,.06:.64058,.07:.64431,.08:.64803,.09:.65173},.4:{"0.00":.65542,.01:.6591,.02:.66276,.03:.6664,.04:.67003,.05:.67364,.06:.67724,.07:.68082,.08:.68439,.09:.68793},.5:{"0.00":.69146,.01:.69497,.02:.69847,.03:.70194,.04:.7054,.05:.70884,.06:.71226,.07:.71566,.08:.71904,.09:.7224},.6:{"0.00":.72575,.01:.72907,.02:.73237,.3:.73565,.04:.73891,.05:.74215,.06:.74537,.07:.74857,.08:.75175,.09:.7549},.7:{"0.00":.75804,.01:.76115,.02:.76424,.03:.7673,.04:.77035,.05:.77337,.06:.77637,.07:.77935,.08:.7823,.09:.78524},.8:{"0.00":.78814,.01:.79103,.02:.79389,.03:.79673,.04:.79955,.05:.80234,.6:.80511,.07:.80785,.08:.81057,.09:.81327},.9:{"0.00":.81594,.01:.81859,.02:.82121,.03:.82381,.04:.82639,.05:.82894,.06:.83147,.07:.83398,.08:.83646,.09:.83891},"1.0":{"0.00":.84134,.01:.84375,.02:.84614,.03:.84849,.04:.85083,.05:.85314,.06:.85543,.07:.85769,.08:.85993,.09:.86214},1.1:{"0.00":.86433,.01:.8665,.02:.86864,.03:.87076,.04:.87286,.05:.87493,.06:.87698,.07:.879,.08:.881,.09:.88298},1.2:{"0.00":.88493,.01:.88686,.02:.88877,.03:.89065,.04:.89251,.05:.89435,.06:.89617,.07:.89796,.08:.89973,.09:.90147},1.3:{"0.00":.9032,.01:.9049,.02:.90658,.03:.90824,.04:.90988,.05:.91149,.06:.91308,.07:.91466,.08:.91621,.09:.91774},1.4:{"0.00":.91924,.01:.92073,.02:.9222,.03:.92364,.04:.92507,.05:.92647,.06:.92785,.07:.92922,.08:.93056,.09:.93189},1.5:{"0.00":.93319,.01:.93448,.02:.93574,.03:.93699,.04:.93822,.05:.93943,.06:.94062,.07:.94179,.08:.94295,.09:.94408},1.6:{"0.00":.9452,.01:.9463,.02:.94738,.03:.94845,.04:.9495,.05:.95053,.06:.95154,.07:.95254,.08:.95352,.09:.95449},1.7:{"0.00":.95543,.01:.95637,.02:.95728,.03:.95818,.04:.95907,.05:.95994,.06:.9608,.07:.96164,.08:.96246,.09:.96327},1.8:{"0.00":.96407,.01:.96485,.02:.96562,.03:.96638,.04:.96712,.05:.96784,.06:.96856,.07:.96926,.08:.96995,.09:.97062},1.9:{"0.00":.97128,.01:.97193,.02:.97257,.03:.9732,.04:.97381,.05:.97441,.06:.975,.07:.97558,.08:.97615,.09:.9767},"2.0":{"0.00":.97725,.01:.97778,.02:.97831,.03:.97882,.04:.97932,.05:.97982,.06:.9803,.07:.98077,.08:.98124,.09:.98169},2.1:{"0.00":.98214,.01:.98257,.02:.983,.03:.98341,.04:.98382,.05:.98422,.06:.98461,.07:.985,.08:.98537,.09:.98574},2.2:{"0.00":.9861,.01:.98645,.02:.98679,.03:.98713,.04:.98745,.05:.98778,.06:.98809,.07:.9884,.08:.9887,.09:.98899},2.3:{"0.00":.98928,.01:.98956,.02:.98983,.03:.9901,.04:.99036,.05:.99061,.06:.99086,.07:.99111,.08:.99134,.09:.99158},2.4:{"0.00":.9918,.01:.99202,.02:.99224,.03:.99245,.04:.99266,.05:.99286,.06:.99305,.07:.99324,.08:.99343,.09:.99361},2.5:{"0.00":.99379,.01:.99396,.02:.99413,.03:.9943,.04:.99446,.05:.99461,.06:.99477,.07:.99506,.08:.99492,.09:.9952},2.6:{"0.00":.99534,.01:.99547,.02:.9956,.03:.99573,.04:.99585,.05:.99598,.06:.99609,.07:.99621,.08:.99632,.09:.99643},2.7:{"0.00":.99653,.01:.99664,.02:.99674,.03:.99683,.04:.99693,.05:.99702,.06:.99711,.07:.9972,.08:.99728,.09:.99736},2.8:{"0.00":.99744,.01:.99752,.02:.9976,.03:.99767,.04:.99774,.05:.99781,.06:.99788,.07:.99795,.08:.99801,.09:.99807},2.9:{"0.00":.99813,.01:.99819,.02:.99825,.03:.99831,.04:.99836,.05:.99841,.06:.99846,.07:.99851,.08:.99856,.09:.99861},"3.0":{"0.00":.99865,.01:.99869,.02:.99874,.03:.99878,.04:.99882,.05:.99886,.06:.99889,.07:.99893,.08:.99896,.09:.999},3.1:{"0.00":.99903,.01:.99906,.02:.9991,.03:.99913,.04:.99916,.05:.99918,.06:.99921,.07:.99924,.08:.99926,.09:.99929},3.2:{"0.00":.99931,.01:.99934,.02:.99936,.03:.99938,.04:.9994,.05:.99942,.06:.99944,.07:.99946,.08:.99948,.09:.9995},3.3:{"0.00":.99952,.01:.99953,.02:.99955,.03:.99957,.04:.99958,.05:.9996,.06:.99961,.07:.99962,.08:.99964,.09:.99965},3.4:{"0.00":.99966,.01:.99968,.02:.99969,.03:.9997,.04:.99971,.05:.99972,.06:.99973,.07:.99974,.08:.99975,.09:.99976},3.5:{"0.00":.99977,.01:.99978,.02:.99978,.03:.99979,.04:.9998,.05:.99981,.06:.99981,.07:.99982,.08:.99983,.09:.99983},3.6:{"0.00":.99984,.01:.99985,.02:.99985,.03:.99986,.04:.99986,.05:.99987,.06:.99987,.07:.99988,.08:.99988,.09:.99989},3.7:{"0.00":.99989,.01:.9999,.02:.9999,.03:.9999,.04:.99991,.05:.99991,.06:.99992,.07:.99992,.08:.99992,.09:.99992},3.8:{"0.00":.99993,.01:.99993,.02:.99993,.03:.99994,.04:.99994,.05:.99994,.06:.99994,.07:.99995,.08:.99995,.09:.99995},3.9:{"0.00":.99995,.01:.99995,.02:.99996,.03:.99996,.04:.99996,.05:.99996,.06:.99996,.07:.99996,.08:.99997,.09:.99997},"4.0":{"0.00":.99997,.01:.99997,.02:.99997,.03:.99997,.04:.99997,.05:.99997,.06:.99998,.07:.99998,.08:.99998,.09:.99998}};function y(r,n){void 0===n&&(n=p);var t=r.reduce((function(r,n){return r+ +n}),0);return f(t/r.length,n)}function O(r,n){return n=void 0===n?y(r):n,r.reduce((function(r,t){return r+Math.pow(+t-Number(n),2)}),0)}r.bankersRounding=function(r,n){void 0===n&&(n=2);var t=Math.pow(10,n),e=n?+r*t:r,i=Math.floor(e),a=e-i,o=Number.EPSILON,u=a>.5-o&&.5+o>a?i%2==0?i:i+1:Math.round(e);return n?u/t:u},r.fvInDfc=s,r.interestInLoan=U,r.irr=function(r){var n=(r=t({decimal:p},r)).cfList,e=r.decimal,i=d(r.initCf);if(n.every((function(r){return d(r)===i})))return NaN;for(var a=0,o=[],u=[];100>=a;){var N=E(t(t({},r),{rate:a}));c(N)>1||(o.push(c(N)),u.push(a)),a=f(a+.001,e)}if(o.length>0){var l=Math.min.apply(Math,o);return u[o.indexOf(l)]}return NaN},r.mean=y,r.npv=E,r.pmtInDfc=v,r.pmtInloan=B,r.principalInLoan=R,r.pvInDfc=function(r){if(i(r),!a(r=t(t({},N),r),t({n:n.NUMBER,pmt:n.NUMBER,fv:n.NUMBER,rate:n.NUMBER},l)))return NaN;for(var e=r.n,o=r.pmt,c=r.isEnd,f=r.decimal,d=1+r.rate/100,p=-r.fv*u(d,-e),s=1;e>=s;)p-=o*u(d,c?-s:1-s),s++;return+p.toFixed(f)},r.rateInDfc=function(r){if(i(r),!a(r=t(t({},N),r),t({n:n.NUMBER,pmt:n.NUMBER,fv:n.NUMBER,pv:n.NUMBER},l)))return NaN;for(var e=r.n,o=r.pmt,f=r.fv,d=r.pv,p=r.isEnd,v=r.decimal,E=0,m=100,M=u(10,1-v),B=+((E+m)/2).toFixed(v);m>E;){var R=s({n:e,pv:d,rate:B,pmt:o,isEnd:p,decimal:v});if(c(R-f)<=M)break;c(R)>c(f)?m=B:E=B,B=+((E+m)/2).toFixed(v)}return B>m||E>B?NaN:B},r.repaymentScheduleInLoan=function(r){if(!a(r=t(t({},m),r),t({principal:n.NUMBER,rate:n.NUMBER,periods:n.NUMBER,isEqualPayment:n.BOOLEAN},M)))return[];for(var e=r.periods,i=r.decimal,o=[],u=1;e>=u;u++){var c=t(t({},r),{currentPeriod:u}),d=R(c),p=U(c),N=f(d+p,i);o.push({currentPeriod:u,principal:d,interest:p,repayment:N})}return o},r.semiDeviation=function(r,n,t){void 0===t&&(t=p);var e=O(r,n);return f(Math.sqrt(e/(r.length-1)),t)},r.stdDeviation=function(r,n){void 0===n&&(n=p);var t=O(r);return f(Math.sqrt(t/r.length),n)},r.stdDeviationOfSample=function(r,n){void 0===n&&(n=p);var t=O(r);return f(Math.sqrt(t/(r.length-1)),n)},r.stdNormalDistributionValue=function(r){var n;if(!/^(\+|-)?\d+(\.\d+)?$/.test(r))return NaN;var t=h,e=Object.keys(t).sort((function(r,n){return+n-+r}))[0];if(+r>+e||-e>+r)return f(+t[e][.09]+1e-5,5);var i=(r=Number(r).toFixed(2)).match(/([+|-]?\d+\.\d)(\d)/);if(i){var a=i[1],o=null===(n=t[Math.abs(+a)])||void 0===n?void 0:n["0.0".concat(i[2])];return 0>Number(a)?f(1-o,5):o}return NaN},r.totalInterestInLoan=function(r){if(!a(r=t(t({},m),r),t({principal:n.NUMBER,rate:n.NUMBER,periods:n.NUMBER,isEqualPayment:n.BOOLEAN},M)))return NaN;var e=r.periods,i=r.decimal,o=r.principal,u=r.rate/100;return f(r.isEqualPayment?e*B(r)-o:(e+1)*o*u/2,i)},r.variance=function(r,n){void 0===n&&(n=p);var t=O(r);return f(t/r.length,n)},r.varianceOfSample=function(r,n){void 0===n&&(n=p);var t=O(r);return f(t/(r.length-1),n)}}));
