!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e="undefined"!=typeof globalThis?globalThis:e||self).calculate={})}(this,(function(e){"use strict";var r,n=function(){return n=Object.assign||function(e){for(var r,n=1,t=arguments.length;t>n;n++)for(var i in r=arguments[n])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e},n.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError,function(e){e.NUMBER="number",e.STRING="string",e.BOOLEAN="boolean",e.OBJECT="object",e.UNDEFINED="undefined",e.NULL="null",e.SYMBOL="symbol",e.ARRAY="array",e.DATE="date",e.FUNCTION="function"}(r||(r={}));var t=Math.pow,i=Math.abs,a=function(e,r){return+e.toFixed(r)},o={isEnd:!0,decimal:4};function u(e){e=n(n({},o),e);for(var r=e.n,i=e.pmt,a=e.isEnd,u=e.decimal,p=1+e.rate/100,c=-e.pv*t(p,r),f=1;r>=f;)c-=i*t(p,a?r-f:r-f+1),f++;return+c.toFixed(u)}function p(e){e=n(n({},o),e);for(var r=e.n,i=e.pv,a=e.fv,u=e.isEnd,p=e.decimal,c=1+e.rate/100,f=0,s=1;r>=s;)f+=t(c,u?r-s:r-s+1),s++;return-((i*t(c,r)+a)/f).toFixed(p)}var c={isEqualPayment:!0,periodPerYear:1},f=4;function s(e){var r=(e=n(n({},c),e)).periodPerYear;if(e.isEqualPayment){var t=p({n:e.years*r,fv:0,pv:e.principal,rate:e.rate/r});return i(t)}return console.log(l(e),"-getInterestPerPeriod-"),console.log(d(e),"-getPrincipalPerPeriod-"),a(l(e)+d(e),f)}function d(e){var r=(e=n(n({},c),e)).years*e.periodPerYear;return a(e.isEqualPayment?s(e)-l(e):e.principal/r,f)}function l(e){e=n(n({},c),e);var r=e.periodPerYear,i=e.current,o=e.rate/r/100;if(e.isEqualPayment){var u=t(1+o,e.years*r);return a(e.principal*o*(u-t(1+o,i-1))/(u-1),f)}return a((e.principal-(i-1)*d(e))*o,f)}e.getFVInDFC=u,e.getInterestPerPeriod=l,e.getPMTInDFC=p,e.getPVInDFC=function(e){for(var r=(e=n(n({},o),e)).n,i=e.pmt,a=e.isEnd,u=e.decimal,p=1+e.rate/100,c=-e.fv*t(p,-r),f=1;r>=f;)c-=i*t(p,a?-f:1-f),f++;return+c.toFixed(u)},e.getPaymentPerPeriod=s,e.getPrincipalPerPeriod=d,e.getRateInDFC=function(e){for(var r=(e=n(n({},o),e)).n,a=e.pmt,p=e.fv,c=e.pv,f=e.isEnd,s=e.decimal,d=0,l=100,v=t(10,1-s),P=+((d+l)/2).toFixed(s);l>=P&&P>=d;){var y=u({n:r,pv:c,rate:P,pmt:a,isEnd:f,decimal:s});if(i(y-p)<=v)break;i(y)>i(p)?l=P:d=P,P=+((d+l)/2).toFixed(s)}return P},e.paymentListInLoan=function(e){for(var r=(e=n(n({},c),e)).years*e.periodPerYear,t=[],i=1;r>=i;i++){var o=n(n({},e),{current:i}),u=d(o),p=l(o),s=a(u+p,f);t.push({current:i,principal:u,interest:p,payment:s})}return t},e.totalInterestInLoan=function(e){var r=(e=n(n({},c),e)).principal,t=e.rate,i=e.periodPerYear,o=e.years*i;return a(e.isEqualPayment?o*s(e)-r:(o+1)*r*(t/i/100)/2,f)}}));
