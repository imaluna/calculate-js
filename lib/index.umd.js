!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).calculate={})}(this,(function(t){"use strict";var e,n=function(){return n=Object.assign||function(t){for(var e,n=1,r=arguments.length;r>n;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},n.apply(this,arguments)};function r(t){return Object.prototype.toString.call(t).slice(8,-1).toLocaleLowerCase()}function a(t){r(t)!==e.OBJECT&&o("params must be object")}function i(t,e){return a(t),a(e),Object.keys(e).every((function(n){var a=e[n],i=r(t[n])===a;return i||o("".concat(n," must be ").concat(a)),i}))}function o(t){throw Error(t)}"function"==typeof SuppressedError&&SuppressedError,function(t){t.NUMBER="number",t.STRING="string",t.BOOLEAN="boolean",t.OBJECT="object",t.UNDEFINED="undefined",t.NULL="null",t.SYMBOL="symbol",t.ARRAY="array",t.DATE="date",t.FUNCTION="function"}(e||(e={}));var p={isEnd:!0,decimal:4},u={isEnd:e.BOOLEAN,decimal:e.NUMBER};function c(t){if(a(t),!i(t=n(n({},p),t),n({n:e.NUMBER,pv:e.NUMBER,pmt:e.NUMBER,rate:e.NUMBER},u)))return NaN;for(var r=t.n,o=t.pmt,c=t.rate,f=t.isEnd,E=t.decimal,N=t.pv*Math.pow(1+c/100,f?r-1:r),d=1;r>=d;)N+=o*Math.pow(1+c/100,f?d-1:d),d++;return+N.toFixed(E)}function f(t){if(a(t),!i(t=n(n({},p),t),n({n:e.NUMBER,pv:e.NUMBER,fv:e.NUMBER,rate:e.NUMBER},u)))return NaN;for(var r=t.n,o=t.pv,c=t.fv,f=t.rate,E=t.isEnd,N=t.decimal,d=0,s=1;r>=s;)d+=Math.pow(1+f/100,E?s-1:s),s++;return+((c-o*Math.pow(1+f/100,E?r-1:r))/d).toFixed(N)}var E={isEualPayment:!0};t.getFVInDFC=c,t.getPMTInDFC=f,t.getPVInDFC=function(t){if(a(t),!i(t=n(n({},p),t),n({n:e.NUMBER,pmt:e.NUMBER,fv:e.NUMBER,rate:e.NUMBER},u)))return NaN;for(var r=t.n,o=t.pmt,c=t.rate,f=t.isEnd,E=t.decimal,N=t.fv,d=r;d>=1;)N-=o*Math.pow(1+c/100,f?d-1:d),d--;return+(N*Math.pow(1+c/100,f?1-r:-r)).toFixed(E)},t.getPVInPerpetuity=function(t){return a(t),i(t=n({decimal:4},t),{pmt:e.NUMBER,rate:e.NUMBER,decimal:e.NUMBER})?+(t.pmt/t.rate).toFixed(t.decimal):NaN},t.getPmtInLoan=function(t){return a(t),i(t=n(n({},E),t),{principal:e.NUMBER,rate:e.NUMBER,period:e.NUMBER,years:e.NUMBER,isEualPayment:e.BOOLEAN})?t.isEualPayment?f({n:t.years*t.period,fv:0,pv:t.principal,rate:t.rate/t.period}):0:NaN},t.getRateInDFC=function(t){if(a(t),!i(t=n(n({},p),t),n({n:e.NUMBER,pmt:e.NUMBER,fv:e.NUMBER,pv:e.NUMBER},u)))return NaN;for(var r=t.n,o=t.pmt,f=t.fv,E=t.pv,N=t.isEnd,d=t.decimal,s=1,l=0,M=Math.pow(10,-d),B=+((s+l)/2).toFixed(d);s>=B&&B>=l;){var m=c({n:r,pv:E,rate:100*B,pmt:o,isEnd:N,decimal:d});if(M>=Math.abs(m-f))break;f>m?l=B:s=B,B=+((s+l)/2).toFixed(d)}return+(100*B).toFixed(d)}}));
