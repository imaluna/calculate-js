!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((r="undefined"!=typeof globalThis?globalThis:r||self).calculatejs={})}(this,(function(r){"use strict";var e,n=function(){return n=Object.assign||function(r){for(var e,n=1,t=arguments.length;t>n;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r},n.apply(this,arguments)};function t(r){return Object.prototype.toString.call(r).slice(8,-1).toLocaleLowerCase()}function a(r){t(r)!==e.OBJECT&&o("params must be object")}function i(r,e){return a(r),a(e),Object.keys(e).every((function(n){var a=e[n],i=t(r[n])===a;return i||o("".concat(n," must be ").concat(a)),i}))}function o(r){throw Error(r)}"function"==typeof SuppressedError&&SuppressedError,function(r){r.NUMBER="number",r.STRING="string",r.BOOLEAN="boolean",r.OBJECT="object",r.UNDEFINED="undefined",r.NULL="null",r.SYMBOL="symbol",r.ARRAY="array",r.DATE="date",r.FUNCTION="function"}(e||(e={}));var u=Math.pow,c=Math.abs,f=function(r,e){return+r.toFixed(e)};function p(r){return r>0?"+":0>r?"-":""}var d=4,l={isEnd:!0,decimal:d},N={isEnd:e.BOOLEAN,decimal:e.NUMBER};function E(r){if(a(r),!i(r=n(n({},l),r),n({n:e.NUMBER,pv:e.NUMBER,pmt:e.NUMBER,rate:e.NUMBER},N)))return NaN;for(var t=r.n,o=r.pmt,c=r.isEnd,f=r.decimal,p=1+r.rate/100,d=-r.pv*u(p,t),E=1;t>=E;)d-=o*u(p,c?t-E:t-E+1),E++;return+d.toFixed(f)}function s(r){if(a(r),!i(r=n(n({},l),r),n({n:e.NUMBER,pv:e.NUMBER,fv:e.NUMBER,rate:e.NUMBER},N)))return NaN;for(var t=r.n,o=r.pv,c=r.fv,f=r.isEnd,p=r.decimal,d=1+r.rate/100,E=0,s=1;t>=s;)E+=u(d,f?t-s:t-s+1),s++;return-((o*u(d,t)+c)/E).toFixed(p)}function v(r){r=n({decimal:d},r);var e=r.rate,t=r.decimal,a=r.initCf;return r.cfList.forEach((function(r,n){a+=r*u(1+e/100,-(n+1))})),f(a,t)}var m={isEqualPayment:!0,periodPerYear:1,decimal:d},B={decimal:e.NUMBER};function M(r){if(a(r),!i(r=n(n({},m),r),n({principal:e.NUMBER,rate:e.NUMBER,periodPerYear:e.NUMBER,years:e.NUMBER,isEqualPayment:e.BOOLEAN},B)))return NaN;var t=r.periodPerYear;if(r.isEqualPayment){var o=s({n:r.years*t,fv:0,pv:r.principal,rate:r.rate/t,decimal:r.decimal});return c(o)}return f(U(r)+R(r),r.decimal)}function R(r){if(a(r),!i(r=n(n({},m),r),n({principal:e.NUMBER,rate:e.NUMBER,periodPerYear:e.NUMBER,years:e.NUMBER,isEqualPayment:e.BOOLEAN},B)))return NaN;var t=r.years*r.periodPerYear,o=r.decimal;return f(r.isEqualPayment?M(r)-U(r):r.principal/t,o)}function U(r){if(a(r),!i(r=n(n({},m),r),n({principal:e.NUMBER,rate:e.NUMBER,periodPerYear:e.NUMBER,years:e.NUMBER,isEqualPayment:e.BOOLEAN},B)))return NaN;var t=r.periodPerYear,o=r.current,c=r.decimal,p=r.rate/t/100;if(r.isEqualPayment){var d=u(1+p,r.years*t);return f(r.principal*p*(d-u(1+p,o-1))/(d-1),c)}return f((r.principal-(o-1)*R(r))*p,c)}var y={"0.0":{"0.00":.5,.01:.50399,.02:.50798,.03:.51197,.04:.51595,.05:.51994,.06:.52392,.07:.5279,.08:.53188,.09:.53586},.1:{"0.00":.53983,.01:.5438,.02:.54776,.03:.55172,.04:.55567,.05:.55962,.06:.5636,.07:.56749,.08:.57142,.09:.57535},.2:{"0.00":.57926,.01:.58317,.02:.58706,.03:.59095,.04:.59483,.05:.59871,.06:.60257,.07:.60642,.08:.61026,.09:.61409},.3:{"0.00":.61791,.01:.62172,.02:.62552,.03:.6293,.04:.63307,.05:.63683,.06:.64058,.07:.64431,.08:.64803,.09:.65173},.4:{"0.00":.65542,.01:.6591,.02:.66276,.03:.6664,.04:.67003,.05:.67364,.06:.67724,.07:.68082,.08:.68439,.09:.68793},.5:{"0.00":.69146,.01:.69497,.02:.69847,.03:.70194,.04:.7054,.05:.70884,.06:.71226,.07:.71566,.08:.71904,.09:.7224},.6:{"0.00":.72575,.01:.72907,.02:.73237,.3:.73565,.04:.73891,.05:.74215,.06:.74537,.07:.74857,.08:.75175,.09:.7549},.7:{"0.00":.75804,.01:.76115,.02:.76424,.03:.7673,.04:.77035,.05:.77337,.06:.77637,.07:.77935,.08:.7823,.09:.78524},.8:{"0.00":.78814,.01:.79103,.02:.79389,.03:.79673,.04:.79955,.05:.80234,.6:.80511,.07:.80785,.08:.81057,.09:.81327},.9:{"0.00":.81594,.01:.81859,.02:.82121,.03:.82381,.04:.82639,.05:.82894,.06:.83147,.07:.83398,.08:.83646,.09:.83891},"1.0":{"0.00":.84134,.01:.84375,.02:.84614,.03:.84849,.04:.85083,.05:.85314,.06:.85543,.07:.85769,.08:.85993,.09:.86214},1.1:{"0.00":.86433,.01:.8665,.02:.86864,.03:.87076,.04:.87286,.05:.87493,.06:.87698,.07:.879,.08:.881,.09:.88298},1.2:{"0.00":.88493,.01:.88686,.02:.88877,.03:.89065,.04:.89251,.05:.89435,.06:.89617,.07:.89796,.08:.89973,.09:.90147},1.3:{"0.00":.9032,.01:.9049,.02:.90658,.03:.90824,.04:.90988,.05:.91149,.06:.91308,.07:.91466,.08:.91621,.09:.91774},1.4:{"0.00":.91924,.01:.92073,.02:.9222,.03:.92364,.04:.92507,.05:.92647,.06:.92785,.07:.92922,.08:.93056,.09:.93189},1.5:{"0.00":.93319,.01:.93448,.02:.93574,.03:.93699,.04:.93822,.05:.93943,.06:.94062,.07:.94179,.08:.94295,.09:.94408},1.6:{"0.00":.9452,.01:.9463,.02:.94738,.03:.94845,.04:.9495,.05:.95053,.06:.95154,.07:.95254,.08:.95352,.09:.95449},1.7:{"0.00":.95543,.01:.95637,.02:.95728,.03:.95818,.04:.95907,.05:.95994,.06:.9608,.07:.96164,.08:.96246,.09:.96327},1.8:{"0.00":.96407,.01:.96485,.02:.96562,.03:.96638,.04:.96712,.05:.96784,.06:.96856,.07:.96926,.08:.96995,.09:.97062},1.9:{"0.00":.97128,.01:.97193,.02:.97257,.03:.9732,.04:.97381,.05:.97441,.06:.975,.07:.97558,.08:.97615,.09:.9767},"2.0":{"0.00":.97725,.01:.97778,.02:.97831,.03:.97882,.04:.97932,.05:.97982,.06:.9803,.07:.98077,.08:.98124,.09:.98169},2.1:{"0.00":.98214,.01:.98257,.02:.983,.03:.98341,.04:.98382,.05:.98422,.06:.98461,.07:.985,.08:.98537,.09:.98574},2.2:{"0.00":.9861,.01:.98645,.02:.98679,.03:.98713,.04:.98745,.05:.98778,.06:.98809,.07:.9884,.08:.9887,.09:.98899},2.3:{"0.00":.98928,.01:.98956,.02:.98983,.03:.9901,.04:.99036,.05:.99061,.06:.99086,.07:.99111,.08:.99134,.09:.99158},2.4:{"0.00":.9918,.01:.99202,.02:.99224,.03:.99245,.04:.99266,.05:.99286,.06:.99305,.07:.99324,.08:.99343,.09:.99361},2.5:{"0.00":.99379,.01:.99396,.02:.99413,.03:.9943,.04:.99446,.05:.99461,.06:.99477,.07:.99506,.08:.99492,.09:.9952},2.6:{"0.00":.99534,.01:.99547,.02:.9956,.03:.99573,.04:.99585,.05:.99598,.06:.99609,.07:.99621,.08:.99632,.09:.99643},2.7:{"0.00":.99653,.01:.99664,.02:.99674,.03:.99683,.04:.99693,.05:.99702,.06:.99711,.07:.9972,.08:.99728,.09:.99736},2.8:{"0.00":.99744,.01:.99752,.02:.9976,.03:.99767,.04:.99774,.05:.99781,.06:.99788,.07:.99795,.08:.99801,.09:.99807},2.9:{"0.00":.99813,.01:.99819,.02:.99825,.03:.99831,.04:.99836,.05:.99841,.06:.99846,.07:.99851,.08:.99856,.09:.99861},"3.0":{"0.00":.99865,.01:.99869,.02:.99874,.03:.99878,.04:.99882,.05:.99886,.06:.99889,.07:.99893,.08:.99896,.09:.999},3.1:{"0.00":.99903,.01:.99906,.02:.9991,.03:.99913,.04:.99916,.05:.99918,.06:.99921,.07:.99924,.08:.99926,.09:.99929},3.2:{"0.00":.99931,.01:.99934,.02:.99936,.03:.99938,.04:.9994,.05:.99942,.06:.99944,.07:.99946,.08:.99948,.09:.9995},3.3:{"0.00":.99952,.01:.99953,.02:.99955,.03:.99957,.04:.99958,.05:.9996,.06:.99961,.07:.99962,.08:.99964,.09:.99965},3.4:{"0.00":.99966,.01:.99968,.02:.99969,.03:.9997,.04:.99971,.05:.99972,.06:.99973,.07:.99974,.08:.99975,.09:.99976},3.5:{"0.00":.99977,.01:.99978,.02:.99978,.03:.99979,.04:.9998,.05:.99981,.06:.99981,.07:.99982,.08:.99983,.09:.99983},3.6:{"0.00":.99984,.01:.99985,.02:.99985,.03:.99986,.04:.99986,.05:.99987,.06:.99987,.07:.99988,.08:.99988,.09:.99989},3.7:{"0.00":.99989,.01:.9999,.02:.9999,.03:.9999,.04:.99991,.05:.99991,.06:.99992,.07:.99992,.08:.99992,.09:.99992},3.8:{"0.00":.99993,.01:.99993,.02:.99993,.03:.99994,.04:.99994,.05:.99994,.06:.99994,.07:.99995,.08:.99995,.09:.99995},3.9:{"0.00":.99995,.01:.99995,.02:.99996,.03:.99996,.04:.99996,.05:.99996,.06:.99996,.07:.99996,.08:.99997,.09:.99997},"4.0":{"0.00":.99997,.01:.99997,.02:.99997,.03:.99997,.04:.99997,.05:.99997,.06:.99998,.07:.99998,.08:.99998,.09:.99998}};function O(r,e){void 0===e&&(e=d);var n=r.reduce((function(r,e){return r+ +e}),0);return f(n/r.length,e)}function h(r,e){return e=void 0===e?O(r):e,r.reduce((function(r,n){return r+Math.pow(+n-Number(e),2)}),0)}r.fvInDfc=E,r.getMean=O,r.getSemiDeviation=function(r,e,n){void 0===n&&(n=d);var t=h(r,e);return f(Math.sqrt(t/(r.length-1)),n)},r.getStd=function(r,e){void 0===e&&(e=d);var n=h(r);return f(Math.sqrt(n/r.length),e)},r.getStdNormalDistributionValue=function(r){var e,n;if(!/^(\+|-)?\d+(\.\d+)?$/.test(r))return NaN;var t=y,a=Object.keys(t).sort((function(r,e){return+e-+r}))[0];if(+r>+a||-a>+r)return f(+t[a][.09]+1e-5,5);var i=(r=Number(r).toFixed(2)).match(/(\d+\.\d)(\d)/);return i&&null!==(n=null===(e=t[i[1]])||void 0===e?void 0:e["0.0".concat(i[2])])&&void 0!==n?n:NaN},r.getStdOfSample=function(r,e){void 0===e&&(e=d);var n=h(r);return f(Math.sqrt(n/(r.length-1)),e)},r.getVariance=function(r,e){void 0===e&&(e=d);var n=h(r);return f(n/r.length,e)},r.getVarianceOfSample=function(r,e){void 0===e&&(e=d);var n=h(r);return f(n/(r.length-1),e)},r.interestInLoan=U,r.irr=function(r){var e=(r=n({decimal:d},r)).cfList,t=r.decimal,a=p(r.initCf);if(e.every((function(r){return p(r)===a})))return[];for(var i=f(u(10,-t),t),o=0,l=[];100>=o;){var N=v(n(n({},r),{rate:o}));c(N)>i||l.push(o),o=f(o+i,t)}return l},r.npv=v,r.pmtInDfc=s,r.pmtInloan=M,r.pmtListInLoan=function(r){if(!i(r=n(n({},m),r),n({principal:e.NUMBER,rate:e.NUMBER,periodPerYear:e.NUMBER,years:e.NUMBER,isEqualPayment:e.BOOLEAN},B)))return[];for(var t=r.decimal,a=r.years*r.periodPerYear,o=[],u=1;a>=u;u++){var c=n(n({},r),{current:u}),p=R(c),d=U(c),l=f(p+d,t);o.push({current:u,principal:p,interest:d,payment:l})}return o},r.principalInLoan=R,r.pvInDfc=function(r){if(a(r),!i(r=n(n({},l),r),n({n:e.NUMBER,pmt:e.NUMBER,fv:e.NUMBER,rate:e.NUMBER},N)))return NaN;for(var t=r.n,o=r.pmt,c=r.isEnd,f=r.decimal,p=1+r.rate/100,d=-r.fv*u(p,-t),E=1;t>=E;)d-=o*u(p,c?-E:1-E),E++;return+d.toFixed(f)},r.rateInDfc=function(r){if(a(r),!i(r=n(n({},l),r),n({n:e.NUMBER,pmt:e.NUMBER,fv:e.NUMBER,pv:e.NUMBER},N)))return NaN;for(var t=r.n,o=r.pmt,f=r.fv,p=r.pv,d=r.isEnd,s=r.decimal,v=0,m=100,B=u(10,1-s),M=+((v+m)/2).toFixed(s);m>=M&&M>=v;){var R=E({n:t,pv:p,rate:M,pmt:o,isEnd:d,decimal:s});if(c(R-f)<=B)break;c(R)>c(f)?m=M:v=M,M=+((v+m)/2).toFixed(s)}return M},r.totalInterestInLoan=function(r){if(!i(r=n(n({},m),r),n({principal:e.NUMBER,rate:e.NUMBER,periodPerYear:e.NUMBER,years:e.NUMBER,isEqualPayment:e.BOOLEAN},B)))return NaN;var t=r.principal,a=r.rate,o=r.periodPerYear,u=r.decimal,c=r.years*o;return f(r.isEqualPayment?c*M(r)-t:(c+1)*t*(a/o/100)/2,u)}}));
